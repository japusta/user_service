# –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

–ü—Ä–æ—Å—Ç–æ–π REST‚Äë—Å–µ—Ä–≤–∏—Å –Ω–∞ Express + TypeScript + Prisma –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- **Node.js 20 (Alpine)**  
- **TypeScript** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Express** ‚Äî HTTP‚Äë—Å–µ—Ä–≤–µ—Ä
- **Prisma ORM** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥—ã
- **JWT** (`jsonwebtoken`) ‚Äî —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **bcryptjs** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **class‚Äëvalidator / class‚Äëtransformer** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è DTO
- **Swagger (OpenAPI)**  
  - `swagger-jsdoc` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑ JSDoc  
  - `swagger-ui-express` ‚Äî –≤–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏  
- **Jest + Supertest** ‚Äî unit‚Äë –∏ E2E‚Äë—Ç–µ—Å—Ç—ã
- **Docker + Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ src
‚îÇ ‚îú‚îÄ controllers # HTTP‚Äë—Ä–æ–≤–µ—Ä—ã ‚Äî –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–∞–ø—Ä–æ—Å, –≤—ã–∑—ã–≤–∞—é—Ç service, –æ—Ç–≤–µ—á–∞—é—Ç

‚îÇ ‚îú‚îÄ services # –ë–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞

‚îÇ ‚îú‚îÄ repositories # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ Prisma

‚îÇ ‚îú‚îÄ middlewares # authMiddleware, adminMiddleware, errorHandler

‚îÇ ‚îú‚îÄ dto # Data Transfer Objects + –≤–∞–ª–∏–¥–∞—Ü–∏—è class‚Äëvalidator

‚îÇ ‚îú‚îÄ prisma # –°—Ö–µ–º–∞ Prisma, —Å–∏–¥—ã

‚îÇ ‚îú‚îÄ routes # –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤

‚îÇ ‚îî‚îÄ utils # —É—Ç–∏–ª–∏—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ü–µ–Ω—Ç—Ä –æ—à–∏–±–æ–∫)

‚îú‚îÄ tests # unit + E2E

‚îú‚îÄ Dockerfile

‚îú‚îÄ docker-compose.yml

‚îú‚îÄ tsconfig.json

‚îî‚îÄ README.md



---

## API‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                    | –î–æ—Å—Ç—É–ø        |
|-------|----------------------|-------------------------------------------------------------|---------------|
| POST  | `/users/register`    | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–ø–æ–ª—É—á–∞–µ—Ç DTO, —Ö–µ—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å, —Å–æ–∑–¥–∞—ë—Ç USER)   | Public        |
| POST  | `/users/login`       | –õ–æ–≥–∏–Ω (email+–ø–∞—Ä–æ–ª—å ‚Üí JWT)                                  | Public        |
| GET   | `/users/:id`         | –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID                          | ADMIN –∏–ª–∏ own |
| GET   | `/users`             | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                                   | ADMIN only    |
| POST  | `/users/:id/block`   | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–ª–∏ self‚Äëblock)                  | ADMIN –∏–ª–∏ own |

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger (OpenAPI)

1. **URL**:  
   –ü–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî **`http://localhost:3000/api-docs`**  
2. **–ß—Ç–æ —Ç–∞–º**:  
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤  
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤  
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–ø—Ä–æ–±–æ–≤–∞—Ç—å¬ª API –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞  
3. **–ì–¥–µ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–µ –ø—É—Ç–∏**:  
   –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏/–∏–ª–∏ –≤ `src/routes/userRoutes.ts` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è JSDoc‚Äë–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
   ```ts
   /**
    * @openapi
    * /users/register:
    *   post:
    *     summary: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    *     requestBody:
    *       required: true
    *       content:
    *         application/json:
    *           schema:
    *             $ref: '#/components/schemas/RegisterDto'
    *     responses:
    *       201:
    *         description: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω
    */


## –ó–∞–ø—É—Å–∫
### –õ–æ–∫–∞–ª—å–Ω–æ
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å .env (—Å–º. –ø—Ä–∏–º–µ—Ä –≤ .env.example):
```bash
DATABASE_URL=postgresql://postgres:secret@localhost:5432/user_service?schema=public
JWT_SECRET=<–ª—é–±–∞—è_—Å–ª–æ–∂–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞>
```
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```bash
npm ci
npm run dev      # —Å–µ—Ä–≤–µ—Ä <http://localhost:3000>
```
–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–π/—Å–∏–¥–∞ –≤—Ä—É—á–Ω—É—é:

```bash
npm run prisma:migrate
npm run seed
```
–í Docker
```bash
docker-compose up --build
```
# –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ + —Å–∏–¥ + —Å—Ç–∞—Ä—Ç
# –ë–î –Ω–∞ localhost:5432, API –Ω–∞ localhost:3000
‚úÖ –¢–µ—Å—Ç—ã –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ
Unit‚Äë—Ç–µ—Å—Ç—ã: npm run test

–ó–∞–ø—É—Å–∫ –ø–æ–∫—Ä—ã—Ç–∏—è: npm run test -- --coverage

–ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –ª–µ–∂–∏—Ç –≤ –ø–∞–ø–∫–µ coverage.

üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, —Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

DTO + –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ class‚Äëvalidator

JWT‚Äë–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è + middleware –¥–ª—è —Ä–æ–ª–µ–π

Prisma: –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞

Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

Unit + E2E —Ç–µ—Å—Ç—ã

Docker: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ë–î

üõ°Ô∏è –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
–ß—ë—Ç–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ TypeScript

–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π errorHandler

–í—ã–Ω–µ—Å–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ enum (UserRole, UserStatus)

–¢–æ–∫–µ–Ω-–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å 1 —á–∞—Å + —Å–µ–∫—Ä–µ—Ç –∏–∑ .env

ESLint –∏ Prettier –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Å—Ç–∏–ª—è (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
